CREATE TABLE IF NOT EXISTS "CHAT_USERS"
(
    "ID"         BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    "USERNAME"   VARCHAR(255) UNIQUE                     NOT NULL,
    "NAME"       VARCHAR(255)                            NOT NULL,
    "PASSWORD"   VARCHAR(255)                            NOT NULL,
    "STATUS"     VARCHAR(255)                            NOT NULL,
    "CREATED_AT" TIMESTAMP(6)                            NOT NULL DEFAULT CURRENT_DATE,
    "UPDATED_AT" TIMESTAMP(6)                                     DEFAULT NULL,
    CONSTRAINT "PK_CHAT_USERS" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS "CHAT_ROLES"
(
    "ID"         BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    "ROLE"       VARCHAR(255)                            NOT NULL,
    "CREATED_AT" TIMESTAMP(6)                            NOT NULL DEFAULT CURRENT_DATE,
    "UPDATED_AT" TIMESTAMP(6)                                     DEFAULT NULL,
    CONSTRAINT "PK_CHAT_ROLES" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS "CHAT_USER_ROLES"
(
    "ID"      BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    "ROLE_ID" BIGINT,
    "USER_ID" BIGINT,
    CONSTRAINT "FK_USER_ROLE_ID" FOREIGN KEY ("ROLE_ID") REFERENCES "CHAT_ROLES" ("ID"),
    CONSTRAINT "FK_ROLE_USER_ID" FOREIGN KEY ("USER_ID") REFERENCES "CHAT_USERS" ("ID"),
    CONSTRAINT "PK_USER_ROLES" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS "CHAT_PERMISSIONS"
(
    "ID"         BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    "AUTHORITY"  VARCHAR(255)                            NOT NULL,
    "CREATED_AT" TIMESTAMP(6)                            NOT NULL DEFAULT CURRENT_DATE,
    "UPDATED_AT" TIMESTAMP(6)                                     DEFAULT NULL,
    CONSTRAINT "PK_CHAT_PERMISSIONS" PRIMARY KEY ("ID")
);

CREATE TABLE IF NOT EXISTS "CHAT_ROLE_PERMISSIONS"
(
    "ID"            BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    "ROLE_ID"       BIGINT,
    "PERMISSION_ID" BIGINT,
    CONSTRAINT "FK_PERMISSION_ROLE_ID" FOREIGN KEY ("ROLE_ID") REFERENCES "CHAT_ROLES" ("ID"),
    CONSTRAINT "FK_ROLE_PERMISSION_ID" FOREIGN KEY ("PERMISSION_ID") REFERENCES "CHAT_PERMISSIONS" ("ID"),
    CONSTRAINT "PK_CHAT_ROLE_PERMISSIONS" PRIMARY KEY ("ID")
);